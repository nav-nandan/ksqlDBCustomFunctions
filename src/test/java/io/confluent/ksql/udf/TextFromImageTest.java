package io.confluent.ksql.udf;

import org.junit.Test;

import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;

import static org.junit.Assert.*;

public class TextFromImageTest {

    @Test
    public void testAmazonRekognition() {
        try {
            String url = "https://rekognition.ap-southeast-1.amazonaws.com";
            String image = "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";
            String auth = "AWS4-HMAC-SHA256 Credential=ASIA4CEZVBNW6VTS5M44/20221027/ap-southeast-1/rekognition/aws4_request, SignedHeaders=host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-target;x-amz-user-agent;x-rekognition-consumer, Signature=9febe1c7d77dcaac24f6ddc55cda4af472e3b2c3d52a0fc23c6ca03cc895c31a";
            String timestamp = "20221027T055133Z";
            String service = "RekognitionService.DetectText";
            String token = "IQoJb3JpZ2luX2VjECYaDmFwLXNvdXRoZWFzdC0xIkcwRQIhAMCNJaANhen2oKXLZpNtMHwUvKS2NL85qyeicYczn7JOAiAyWTLL+VfB7ZNQgDcSp66Epi4Uo3XFE2ESbosXF4oeZiqrAwj///////////8BEAMaDDgyOTI1MDkzMTU2NSIMgwNNIcRtQzPpvVBMKv8Ckmn+mCYGdrYKSC1RNbhI3pGP2zPauOlo1yMY2SYNTas40dQqHeNgAOdICBGG/NOToEhQBgZe3wHSIIr49Kkq34pGkA3DubKp4MaLnpBryHSglbSkx4D+HeL+7/I19n/CssIimkDjn5t+GQ04bf+pfUZ2trz31peUxLJ12enPaW2xSnq1gbbl1jQIqjVCDgiTVwFMjBdNnbk98Tph7G5vWqoKreX4Uu6quicbUIRoxShrGjc37EqjSMvMKYKyZoTqE0Ed41cM2Gn9oLK+0tOQeB/WRlsLsCMS93ytFqnPFr/fwLsHbNi8ZEVEXASVXr9IOijgBap8jKTQeoeLJXx3x9YMA4EvrSCqaO8hTAZdxAc1H75Xiv3PMBTuqziTfIBIkBT9a939kJoS/QTU1TBMcsIgqrgAXGMLDf/IIK93pv7VqkXtfLSf6r/jKZvF7bTkyVyipcEjfNBQvblPkeq1EIBgvTyae9Rfs44O/XJdca3eAkLMUZ1ThVbAZfS0k74wwtrnmgY67QGh2I6AbE82b+ogMvxFaZkdXcDHsb3sAHEbiGT3qQR3T9vx+tVv2JNLoaPW1W4PVOX5CtAhxOtLcVDJLnjzfEToXbo2mWfZZ+7QKKhOQlgRWbkAr5al0zKvBE36u/PeVKMOCRwo8Hp3I9FN/KLCN2Fc2VC0S0EKW4r3o/dKd8xUHMFDIEDgAl/jALq1w9Ed2Xz3GfsfyrnOEkmw0jWoK/y3yiZFPcuciQ4KYc1ekNh/HNj+LUnwqc0/0fzEM+3RSRtz7qtwKPJnEKaN/B6o2LkoJOit9n3Fz+wZQP3ve8MMj/e3ZHR5LX8YDBMXgRw=";
            HttpClient client = HttpClient.newHttpClient();
            HttpResponse<String> response = null;
            String body = "{\"Image\":{\"Bytes\":\"" + image + "\"}}";

            HttpRequest request = HttpRequest.newBuilder().uri(URI.create(url))
                    .POST(HttpRequest.BodyPublishers.ofString(body))
                    .header("Authorization", auth)
                    .header("Content-Type", "application/x-amz-json-1.1")
                    .headers("X-Amz-Content-Sha256", "28291d9050db6a58df7d1d99d7b326c54adaca721a6ecaebf789ee373c7b922f")
                    .headers("X-Amz-Date", timestamp)
                    .headers("X-Amz-Target", service)
                    .headers("X-Amz-User-Agent", "aws-sdk-js/2.1111.0 promise")
                    .headers("X-Rekognition-Consumer", "console")
                    .headers("x-amz-security-token", token)
                    .build();
            response = client.send(request, HttpResponse.BodyHandlers.ofString());
            System.out.println(response.body());
            assertNotNull(response.toString());
        } catch (Exception e) {
            System.out.println(e);
            e.printStackTrace();
        }
    }
}
